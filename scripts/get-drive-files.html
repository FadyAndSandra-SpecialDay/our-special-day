<!DOCTYPE html>
<html>
<head>
  <title>Google Drive Music URL Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    .instructions {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
    button {
      background: #4CAF50;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px 5px;
    }
    button:hover { background: #45a049; }
    textarea {
      width: 100%;
      min-height: 200px;
      font-family: monospace;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-top: 20px;
    }
    .result {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 5px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéµ Google Drive Music URL Generator</h1>
    
    <div class="instructions">
      <h3>How to use:</h3>
      <ol>
        <li>Open your Google Drive folder: <a href="https://drive.google.com/drive/u/1/folders/1oNv7irFHp1N-F2WnexkXZIhPzbBktsez" target="_blank">Open Folder</a></li>
        <li>Make sure all MP3 files are visible</li>
        <li>Open browser console (F12 > Console)</li>
        <li>Paste and run the code below</li>
        <li>Copy the result to your weddingConfig.ts</li>
      </ol>
    </div>

    <h3>Console Code:</h3>
    <textarea id="code">// Run this in the Google Drive folder page console (F12)

// Method 1: Try to extract from page
function getDriveMusicUrls() {
  const urls = [];
  
  // Try to find file links in the page
  const links = document.querySelectorAll('a[data-id], [data-id]');
  
  links.forEach(link => {
    const fileId = link.getAttribute('data-id');
    const href = link.getAttribute('href');
    
    if (fileId && fileId.length > 10) {
      // Check if it's an MP3 by looking at nearby text
      const container = link.closest('[data-name]') || link.parentElement;
      const fileName = container.getAttribute('data-name') || 
                      container.textContent || 
                      link.textContent;
      
      if (fileName && fileName.toLowerCase().endsWith('.mp3')) {
        urls.push({
          id: fileId,
          name: fileName.trim(),
          url: `https://drive.google.com/uc?export=download&id=${fileId}`
        });
      }
    }
  });
  
  // Alternative: Try to get from share links
  if (urls.length === 0) {
    console.log('Trying alternative method...');
    // Look for share dialog or file info
    const shareButtons = document.querySelectorAll('[aria-label*="Share"], [title*="Share"]');
    console.log(`Found ${shareButtons.length} potential share buttons`);
  }
  
  // Generate output
  if (urls.length > 0) {
    console.log('\n‚úÖ Found', urls.length, 'MP3 files:\n');
    console.log('// Copy this to weddingConfig.ts:');
    console.log('backgroundMusicUrl: [');
    urls.forEach((file, index) => {
      const comma = index < urls.length - 1 ? ',' : '';
      console.log(`  "${file.url}",  // ${file.name}${comma}`);
    });
    console.log('],');
    
    // Also copy to clipboard if possible
    const code = 'backgroundMusicUrl: [\n' + 
      urls.map(f => `  "${f.url}",  // ${f.name}`).join('\n') + 
      '\n],';
    
    navigator.clipboard.writeText(code).then(() => {
      console.log('\nüìã Copied to clipboard!');
    }).catch(() => {
      console.log('\nüìã Copy the code above manually');
    });
    
    return urls;
  } else {
    console.log('‚ùå No MP3 files found. Try the manual method instead.');
    console.log('\nManual method:');
    console.log('1. Right-click each MP3 file');
    console.log('2. Click "Share" > "Get link"');
    console.log('3. Copy link, extract FILE_ID from: https://drive.google.com/file/d/FILE_ID/view');
    console.log('4. Use: https://drive.google.com/uc?export=download&id=FILE_ID');
  }
}

// Run it
getDriveMusicUrls();

// Alternative: If the above doesn't work, try this simpler method
function getFileIdsFromPage() {
  // Look for any data attributes with file IDs
  const allElements = document.querySelectorAll('[data-id]');
  const fileIds = new Set();
  
  allElements.forEach(el => {
    const id = el.getAttribute('data-id');
    if (id && id.length > 20) {
      fileIds.add(id);
    }
  });
  
  console.log('Found potential file IDs:', Array.from(fileIds));
  console.log('\nFor each ID, create URL:');
  console.log('https://drive.google.com/uc?export=download&id=FILE_ID');
}

// Uncomment to try alternative:
// getFileIdsFromPage();
</textarea>
    
    <button onclick="copyCode()">Copy Code to Clipboard</button>
    
    <div class="result">
      <h3>üìù Manual Method (Most Reliable):</h3>
      <ol>
        <li>Right-click each MP3 file in the folder</li>
        <li>Click <strong>Share</strong> > <strong>Copy link</strong></li>
        <li>Extract the FILE_ID from the URL (between <code>/d/</code> and <code>/view</code>)</li>
        <li>Convert to: <code>https://drive.google.com/uc?export=download&id=FILE_ID</code></li>
        <li>Add to your <code>weddingConfig.ts</code> array</li>
      </ol>
      
      <h3>Example:</h3>
      <pre>
backgroundMusicUrl: [
  "https://drive.google.com/uc?export=download&id=1ABC123xyz",
  "https://drive.google.com/uc?export=download&id=1DEF456abc",
  "https://drive.google.com/uc?export=download&id=1GHI789def",
],
      </pre>
    </div>
  </div>

  <script>
    function copyCode() {
      document.getElementById('code').select();
      document.execCommand('copy');
      alert('Code copied! Now open your Drive folder and paste in browser console (F12)');
    }
  </script>
</body>
</html>

